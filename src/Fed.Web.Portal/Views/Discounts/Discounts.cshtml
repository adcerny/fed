@using Fed.Core.Entities
@using Fed.Core.Extensions
@model List<Discount>
@{
    Layout = "_Master";
}

<h1>Discounts</h1>

<div class="formRow">
    <a class="linkButton" href="/discounts/create">Create Discount</a>
</div>

<div class="discountList">
    <h2>Discounts</h2>

    <div class="dynamicTable">
        @if (Model == null || Model.Count == 0)
        {
            <p>No data to display.</p>
        }
        <table class="tablesorter-metro-dark">
            <thead>
                <tr>
                    <th class="left name">Name</th>
                    <th class="left">Description</th>
                    <th class="left">Percentage</th>
                    <th class="left">Value of Discount</th>
                    <th class="left">Minimum order value</th>
                    <th class="left">Maximum order value</th>
                    <th class="left">Applied Event</th>
                    <th class="left">Start date</th>
                    <th class="left">Days Active</th>
                    <th class="left">End Date</th>
                    <th class="left">Start Event</th>
                    <th class="left">Start Event End Date</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var discount in Model)
                {
                <tr>
                    <td><a href="~/discounts/@discount.Id">@discount.Name</a></td>
                    <td>@discount.Description</td>
                    <td>@(discount.Percentage.HasValue ? $"{Math.Round(discount.Percentage.Value, 0)}%" : "N/A")</td>
                    <td>@(discount.Value.HasValue ? $"£{discount.Value.Value.ToString("C2")}" : "N/A")</td>
                    <td>@discount.MinOrderValue</td>
                    <td>@discount.MaxOrderValue</td>
                    <td>@discount.AppliedEvent</td>
                    <td>@discount.AppliedStartDate</td>
                    <td>@discount.PeriodFromStartDays</td>
                    <td>@discount.AppliedEndDate</td>
                    <td>@discount.StartEvent</td>
                    <td>@discount.StartEventEndDate</td>
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>
